<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="visit">

<!-- 전체 조회   셀렉트는 리설트타입이반드시있음 desc 오름차순(최신순)-->
	 	<select id="visit_list" resultType="visit">
	 			select * from visit order by idx desc
	 	</select>
	 	
	 	
<!--  검색조건 조회 전체조회복사후 수정  ||파이프로 더해야됨-->	 	

	 	<select id="visit_list_condition" parameterType="map" resultType="visit">
 			select * from visit 
	 			<trim prefix="where" prefixOverrides="or">
	 				<if test="name!=null">
	 					name like '%' || #{name} || '%' 
	 				</if>
	 				
	 				<if test="content!=null">
	 					or content like '%' || #{content}|| '%'
	 				</if>
	 				
	 			</trim>
	 				order by idx desc
	 	</select>
 
 <!-- 1건 조회  -->	
 		<select id="visit_one" parameterType="int" resultType="visit">
 			select * from visit where idx = #{idx}
 		</select>		
 		
 <!-- 수정  -->		
 	<update id="visit_update" parameterType="visit">
 			update visit set name=#{name},
 								content=#{content},
 								pwd=#{pwd},
 								ip=#{ip}
 			where idx=#{idx}					
 	</update>
 	
<!-- 데이터 추가하는맵퍼 -->
		<insert id="visit_insert" parameterType="db.vo.VisitVo"> <!--vo안에있는 get네임이 들어오는거  -->
				insert into visit values (seq_visit_idx.nextVal , #{ name } , #{ content } , #{ pwd } , #{ ip } , sysdate)
		</insert>
		
<!-- 삭제 -->
		<delete id="visit_delete" parameterType="int">
				delete from visit where idx = #{idx}
		</delete>
		
		
		
</mapper>












